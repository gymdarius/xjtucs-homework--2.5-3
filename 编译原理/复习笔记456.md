#### x4词法分析

词法分析任务：确定源程序w（大字符集ASCII上的一个符号串）中每一个子串x及其所属语言

token类别

+ 标识符(identifier):用户定义的名字
+ 保留字(reserved word):关键字/基本字
+ 常数(constant):整数(integer)等
+ 界符:分隔符
+ 运算符:操作符

记号的设计：全体一种【(KEY,while)】，一符一种【(while,-)】

![image-20240624111633023](https://gitee.com/du-jianyu1012/img/raw/master/picture/image-20240624111633023.png)

![image-20240624111900151](https://gitee.com/du-jianyu1012/img/raw/master/picture/image-20240624111900151.png)

（定理4.1的后半部分）F的划分集和L(花体)有一一对应的关系时，则定理4.1的前半部分成立

![](https://gitee.com/du-jianyu1012/img/raw/master/picture/image-20240624112058350.png)

##### σ-DFA构造算法

构造算法的输入中下标较小者的优先级较高

![image-20240624113912977](https://gitee.com/du-jianyu1012/img/raw/master/picture/image-20240624113912977.png)

![image-20240624113928800](https://gitee.com/du-jianyu1012/img/raw/master/picture/image-20240624113928800.png)

![image-20240624114135032](https://gitee.com/du-jianyu1012/img/raw/master/picture/image-20240624114135032.png)

考试最多估计考一个设计σ-DFA的题目

#### 5上下文无关文法(CFG)

CFG(Context-free grammar)定义CFL(Context-free language)。

CFG G = (V, T, P, S)

V:变量,T:终结符,P:产生式规则集合,S:开始变量

![image-20240408204123070](https://gitee.com/du-jianyu1012/img/raw/master/picture/image-20240408204123070.png)

迭代式推导

![image-20240408204950515](https://gitee.com/du-jianyu1012/img/raw/master/picture/image-20240408204950515.png)

句型：变量、变量+终结符、终结符

![image-20240408205429870](https://gitee.com/du-jianyu1012/img/raw/master/picture/image-20240408205429870.png)

![image-20240408205439083](https://gitee.com/du-jianyu1012/img/raw/master/picture/image-20240408205439083.png)

**CFL的能力强于正则语言**

**BNF记号**

`::=`表示 -->

`|`表示 或 （一种具有相同左部的产生式的简写）

`...`表示 一到多 (跟RE的*不完全相同 *是0\~n  ...是1\~n)

`[]`表示可选成员

`{}`表示成组，里面的符号序列需要作为一个单位对待

![image-20240410141922609](https://gitee.com/du-jianyu1012/img/raw/master/picture/image-20240410141922609.png)

**最左/右推导**

在推导时总是先替换串中最左/右的变量

**分析树/语法树**

![image-20240410144747384](https://gitee.com/du-jianyu1012/img/raw/master/picture/image-20240410144747384.png)

![image-20240410144756578](https://gitee.com/du-jianyu1012/img/raw/master/picture/image-20240410144756578.png)

定理，证明不看

![image-20240410144816791](https://gitee.com/du-jianyu1012/img/raw/master/picture/image-20240410144816791.png)



![image-20240410145050454](https://gitee.com/du-jianyu1012/img/raw/master/picture/image-20240410145050454.png)

![image-20240410145057104](https://gitee.com/du-jianyu1012/img/raw/master/picture/image-20240410145057104.png)

![image-20240410145104920](https://gitee.com/du-jianyu1012/img/raw/master/picture/image-20240410145104920.png)

![image-20240410151019072](https://gitee.com/du-jianyu1012/img/raw/master/picture/image-20240410151019072.png)

![image-20240410151029474](https://gitee.com/du-jianyu1012/img/raw/master/picture/image-20240410151029474.png)

![image-20240624204248759](https://gitee.com/du-jianyu1012/img/raw/master/picture/image-20240624204248759.png)

**二义性是文法的性质**

**无二义性文法**

**固有的二义性（语言本身）**，不能像平衡括号文法一样消除二义性

语言{0i1j2k | i = j or j = k} 是固有的二义的.【一个产生相等个数的0和1，一个产生相等个数的1和2】

#### 5CFG的简化和生成式的标准化

简化的目的：消除不良影响、简化文法。

![image-20240625002733499](https://gitee.com/du-jianyu1012/img/raw/master/picture/image-20240625002733499.png)

![image-20240625002843719](https://gitee.com/du-jianyu1012/img/raw/master/picture/image-20240625002843719.png)

w是合法句子

步骤：

1. 计算生成符号（可生成合法句子的符号）
2. 计算可达符号（从初始符号可以到达的符号）
3. 消去非生成符号、不可达符号
4. 消去相关无用产生式

**计算生成符号**

![image-20240625102155622](https://gitee.com/du-jianyu1012/img/raw/master/picture/image-20240625102155622.png)

基础：终结符读入 空字符 为本身

**计算可达符号**

![image-20240625102309363](https://gitee.com/du-jianyu1012/img/raw/master/picture/image-20240625102309363.png)

一个简单的例子：

![image-20240625102455043](https://gitee.com/du-jianyu1012/img/raw/master/picture/image-20240625102455043.png)

**生成无e文法**

![image-20240625103003129](https://gitee.com/du-jianyu1012/img/raw/master/picture/image-20240625103003129.png)

![image-20240625103012375](https://gitee.com/du-jianyu1012/img/raw/master/picture/image-20240625103012375.png)

P1加入的部分实际上是一个排列组合的过程

![image-20240625103040532](https://gitee.com/du-jianyu1012/img/raw/master/picture/image-20240625103040532.png)

**消去单产生式**

![image-20240625104014226](https://gitee.com/du-jianyu1012/img/raw/master/picture/image-20240625104014226.png)

![image-20240625104125342](https://gitee.com/du-jianyu1012/img/raw/master/picture/image-20240625104125342.png)

**用例题来理解算法**

![image-20240625104326184](https://gitee.com/du-jianyu1012/img/raw/master/picture/image-20240625104326184.png)

![image-20240625104453746](https://gitee.com/du-jianyu1012/img/raw/master/picture/image-20240625104453746.png)

P1初始为空

![image-20240625104521826](https://gitee.com/du-jianyu1012/img/raw/master/picture/image-20240625104521826.png)

非单元产生式可以全部保留

**CFG的简化**

![image-20240625104707875](https://gitee.com/du-jianyu1012/img/raw/master/picture/image-20240625104707875.png)

**对生成式形式进行标准化---Chomsky范式**

![image-20240625104943185](https://gitee.com/du-jianyu1012/img/raw/master/picture/image-20240625104943185.png)

A右边如果是非终结符，必须是两个非终结符合起来（有且仅有两个非终结符号）

![image-20240625104957780](https://gitee.com/du-jianyu1012/img/raw/master/picture/image-20240625104957780.png)

![image-20240625105229589](https://gitee.com/du-jianyu1012/img/raw/master/picture/image-20240625105229589.png)

![image-20240625105453632](https://gitee.com/du-jianyu1012/img/raw/master/picture/image-20240625105453632.png)

Chomsky范式：简化了文法的表示和分析，还为解析算法的设计和编译器的实现提供了理论基础。

![image-20240625110557581](https://gitee.com/du-jianyu1012/img/raw/master/picture/image-20240625110557581.png)

![image-20240625111101019](https://gitee.com/du-jianyu1012/img/raw/master/picture/image-20240625111101019.png)

消除直接左递归![image-20240625111353979](https://gitee.com/du-jianyu1012/img/raw/master/picture/image-20240625111353979.png)

##### 消除全部左递归 第五章-2 p59 

#### 6语法分析—自上而下分析

![image-20240625120714326](https://gitee.com/du-jianyu1012/img/raw/master/picture/image-20240625120714326.png)

procedure

![image-20240625121020595](https://gitee.com/du-jianyu1012/img/raw/master/picture/image-20240625121020595.png)

![image-20240625121157689](https://gitee.com/du-jianyu1012/img/raw/master/picture/image-20240625121157689.png)

**消除文法左递归**

![image-20240625121341154](https://gitee.com/du-jianyu1012/img/raw/master/picture/image-20240625121341154.png)

![image-20240625121444892](https://gitee.com/du-jianyu1012/img/raw/master/picture/image-20240625121444892.png)

![image-20240625121548127](https://gitee.com/du-jianyu1012/img/raw/master/picture/image-20240625121548127.png)

![image-20240625121645757](https://gitee.com/du-jianyu1012/img/raw/master/picture/image-20240625121645757.png)

![image-20240625121901254](https://gitee.com/du-jianyu1012/img/raw/master/picture/image-20240625121901254.png)

**消除回溯：提左公因子** 让公共前缀只出现在单个产生式中

![image-20240625122229753](https://gitee.com/du-jianyu1012/img/raw/master/picture/image-20240625122229753.png)

**First(α)**

![image-20240625122302503](https://gitee.com/du-jianyu1012/img/raw/master/picture/image-20240625122302503.png)

![image-20240625123446478](https://gitee.com/du-jianyu1012/img/raw/master/picture/image-20240625123446478.png)

![image-20240625123455159](https://gitee.com/du-jianyu1012/img/raw/master/picture/image-20240625123455159.png)

![image-20240625123555064](https://gitee.com/du-jianyu1012/img/raw/master/picture/image-20240625123555064.png)

例子：第6章 p44

![image-20240625124727267](https://gitee.com/du-jianyu1012/img/raw/master/picture/image-20240625124727267.png)

**预测分析程序**

![image-20240625135454958](https://gitee.com/du-jianyu1012/img/raw/master/picture/image-20240625135454958.png)

![image-20240625135517477](https://gitee.com/du-jianyu1012/img/raw/master/picture/image-20240625135517477.png)

![image-20240625135529189](https://gitee.com/du-jianyu1012/img/raw/master/picture/image-20240625135529189.png)

error就是没有对应匹配规则

##### 构造分析表

first集和follow集

![image-20240625135634350](https://gitee.com/du-jianyu1012/img/raw/master/picture/image-20240625135634350.png)

![image-20240625135716027](https://gitee.com/du-jianyu1012/img/raw/master/picture/image-20240625135716027.png)

![image-20240625135805443](https://gitee.com/du-jianyu1012/img/raw/master/picture/image-20240625135805443.png)

![image-20240625135854487](https://gitee.com/du-jianyu1012/img/raw/master/picture/image-20240625135854487.png)

![image-20240625135910789](https://gitee.com/du-jianyu1012/img/raw/master/picture/image-20240625135910789.png)

![image-20240625140004448](https://gitee.com/du-jianyu1012/img/raw/master/picture/image-20240625140004448.png)

![image-20240625140440451](https://gitee.com/du-jianyu1012/img/raw/master/picture/image-20240625140440451.png)

构造规则

![image-20240625140559765](https://gitee.com/du-jianyu1012/img/raw/master/picture/image-20240625140559765.png)

##### LL(1)分析法

从左开始、最左推导、向前看一个字符

![image-20240625141019374](https://gitee.com/du-jianyu1012/img/raw/master/picture/image-20240625141019374.png)

![image-20240625141145810](https://gitee.com/du-jianyu1012/img/raw/master/picture/image-20240625141145810.png)

![image-20240625141409919](https://gitee.com/du-jianyu1012/img/raw/master/picture/image-20240625141409919.png)

**但是，条件语句文法不能改造成LL(1)文法**

